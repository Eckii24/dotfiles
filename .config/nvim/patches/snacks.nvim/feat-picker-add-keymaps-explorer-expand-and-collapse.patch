From d9a24cc8b1d48e5c40c078d44aa7f36ac9774ff7 Mon Sep 17 00:00:00 2001
From: biggybi <biggybi@pm.me>
Date: Tue, 4 Mar 2025 04:06:44 +0100
Subject: [PATCH] feat(picker): keymaps: explorer_expand / explorer_collapse

---
 lua/snacks/explorer/actions.lua      | 16 ++++++++++++++++
 lua/snacks/picker/config/sources.lua |  2 ++
 2 files changed, 18 insertions(+)

diff --git a/lua/snacks/explorer/actions.lua b/lua/snacks/explorer/actions.lua
index 1b349df24..9855a1b26 100644
--- a/lua/snacks/explorer/actions.lua
+++ b/lua/snacks/explorer/actions.lua
@@ -116,6 +116,22 @@ function M.actions.explorer_close(picker, item)
   M.update(picker, { target = dir, refresh = true })
 end
 
+function M.actions.explorer_expand(picker, item)
+  if not item then
+    return
+  end
+  Tree:open(item.file)
+  M.update(picker, { refresh = true })
+end
+
+function M.actions.explorer_collapse(picker, item)
+  if not item then
+    return
+  end
+  Tree:close(item.file)
+  M.update(picker, { refresh = true })
+end
+
 function M.actions.explorer_update(picker)
   Tree:refresh(picker:cwd())
   M.update(picker)
diff --git a/lua/snacks/picker/config/sources.lua b/lua/snacks/picker/config/sources.lua
index d5bd8c306..e058d55ba 100644
--- a/lua/snacks/picker/config/sources.lua
+++ b/lua/snacks/picker/config/sources.lua
@@ -96,6 +96,8 @@ M.explorer = {
         ["."] = "explorer_focus",
         ["I"] = "toggle_ignored",
         ["H"] = "toggle_hidden",
+        [">"] = "explorer_expand",
+        ["<"] = "explorer_collapse",
         ["Z"] = "explorer_close_all",
         ["]g"] = "explorer_git_next",
         ["[g"] = "explorer_git_prev",
